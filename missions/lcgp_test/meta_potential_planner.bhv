initialize STATION_KEEP = false
initialize TRAJ = true

//-----------------------------------------------
// Helm Behavior File

set MODE = ACTIVE {
  DEPLOY = true
} INACTIVE


set MODE = RETURNING {
  MODE = ACTIVE
  RETURN = true
}

set MODE = STATION-KEEPING {
  MODE = ACTIVE
  STATION_KEEP = true
}

set MODE = TRAJECTORY {
  MODE = ACTIVE
  TRAJ = true
}

//----------------------------------------------
Behavior = BHV_Waypoint
{
  name      = traj_waypoints
  pwt       = 0
  condition = MODE==TRAJECTORY
  perpetual = true
  updates   = TRAJ_WAYPOINTS
  point = 150,-125
  speed  = 2.5
  visual_hints = nextpt_lcolor=invisible, label_color=invisible
}

//-----------------------------------------------
Behavior=BHV_PotentialPlanner
{
  name       = waypoints
  pwt        = 100
  condition = MODE==TRAJECTORY
  given_name = WAYPOINT_FORCE
}

// //-----------------------------------------------
// Behavior=BHV_PotentialPlanner
// {
//   name       = avoid_agents
//   pwt        = 100
//   condition = MODE==TRAJECTORY
//   given_name = AGENT_FORCE
// }
// 
// //-----------------------------------------------
// Behavior=BHV_PotentialPlanner
// {
//   name       = avoid_obstacles
//   pwt        = 100
//   condition = MODE==TRAJECTORY
//   given_name = OBSTACLE_FORCE
// }

// //-----------------------------------------------
// Behavior=BHV_PotentialPlanner
// {
//   name       = eoptimality
//   pwt        = 100
//   condition = MODE==TRAJECTORY
//   given_name = EOPTIMALITY_FORCE
// }

Behavior=BHV_ConstantSpeed
{
   // General Behavior Parameters
   // ---------------------------
   name         = const_spd
   pwt          = 100              
   condition    = MODE==TRAJECTORY
   updates      = CONST_SPD_UPDATES

   // Parameters specific to this behavior
   // ------------------------------------
            basewidth = 0.2          // default
             duration = no-time-limit // default
                speed = 2.5          // default
   speed_mismatch_var = SPEED_DIFF   // example
            peakwidth = 0            // default
          summitdelta = 0            // default
}

// Timer for range pings
//----------------------------------------------
 Behavior = BHV_Timer
 {
   // General Behavior Parameters
   // ---------------------------
   name         = range_timer
   condition    = MODE == ACTIVE
   duration     = 1
   endflag      = CRS_RANGE_REQUEST = "name=$(OVNAME)"
   updates      = TIMER_UPDATES
   perpetual    = true
 }

//----------------------------------------------
Behavior = BHV_StationKeep
{
  name      = station-keep
  pwt       = 200
  condition = MODE==STATION-KEEPING
  inactiveflag = STATIONING=false
  activeflag = STATIONING=true

     center_activate = true
        inner_radius = 1
        outer_radius = 10 
         outer_speed = 1.0

       transit_speed = 1.3
          swing_time = 7
        visual_hints = vertex_size=0, edge_color=gray50, label_color=invisible
}

///////////////////////////////////////////////////////////////////
//                          Return                               //
///////////////////////////////////////////////////////////////////

//----------------------------------------------
Behavior = BHV_Waypoint
{
  name      = return_to_start
  pwt       = 100
  condition = MODE==RETURNING
  endflag   = STATION_KEEP = true

     speed  = 2.5
     points = $(START_POS)
}